{% extends "base.html" %}

{% block content %}

<div class="row">
    <!-- show success flashes on top -->
    {% with messages = get_flashed_messages(category_filter=["success"]) %}
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        <span>{{ message }}</span>
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
</div>

<div class="row">
    <!-- tab view -->
    <div class="col">
      <ul class="nav nav-tabs" id="myTab" role="tablist">
         <li class="nav-item">
          <a class="nav-link active" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="true">Profile Image</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="source-tab" data-toggle="tab" href="#source" role="tab" aria-controls="source" aria-selected="false">source Image</a>
        </li>
        <li class="nav-item">
            <!-- <a class="btn btn-outline-primary d-inline ml-3" href="{{ url_for('upload_profile_image', updateprofile=True, nextpage='tryon')}}">Update Profile</a> -->
            <a class="btn btn-outline-primary d-inline ml-5" href="{{ url_for('upload_source_image')}}">Try Next</a>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="profile" role="tabpanel" aria-labelledby="profile-tab">
            <img src="{{ url_for('get_uploaded_image', filename=profile_image)}}" class="img-fluid img-thumbnail">
        </div>
        <div class="tab-pane fade" id="source" role="tabpanel" aria-labelledby="source-tab">
            <img src="{{ url_for('get_uploaded_image', filename=source_image)}}" class="img-fluid img-thumbnail">
        </div>
      </div>
    </div>

    <div class="col">
        <p>
            <span>Result Image</span>
            <a class="btn btn-outline-primary d-inline ml-3" href="{{ url_for('download_file', filename=result_image)}}">Download</a>
            <a class="btn btn-outline-primary d-inline ml-3" href="{{ url_for('get_result_image', filename=result_image)}}" target="_blank" rel="noopener noreferrer">View</a>

        </p>
        <img src="{{ url_for('get_result_image', filename=result_image)}}" class="img-fluid img-thumbnail">
        <div>
            {% with messages = get_flashed_messages(with_categories=True,category_filter=["warning","danger"]) %}
                {% if messages %}
                    <span>Warning(s):</span>
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                            <span>{{ message }}</span>
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </div>
        
    </div>
    
</div>

{% endblock %}